!function(e,n,t){"use strict";n.module("FileManagerApp",["pascalprecht.translate","ngFileUpload"]),t(e.document).on("shown.bs.modal",".modal",function(){e.setTimeout(function(){t("[autofocus]",this).focus()}.bind(this),100)}),t(e.document).on("click",function(){t("#context-menu").hide()}),t(e.document).on("contextmenu",'.main-navigation .table-files tr.item-list:has("td"), .item-list',function(n){var a=t("#context-menu");n.pageX>=e.innerWidth-a.width()&&(n.pageX-=a.width()),n.pageY>=e.innerHeight-a.height()&&(n.pageY-=a.height()),a.hide().css({left:n.pageX,top:n.pageY}).appendTo("body").show(),n.preventDefault()}),Array.prototype.find||(Array.prototype.find=function(e){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n,t=Object(this),a=t.length>>>0,i=arguments[1],r=0;r<a;r++)if(n=t[r],e.call(i,n,r,t))return n})}(window,angular,jQuery),function(e,n){"use strict";e.module("FileManagerApp").controller("FileManagerCtrl",["$scope","$rootScope","$window","$translate","$location","$interval","$filter","fileManagerConfig","item","fileNavigator","apiMiddleware",function(t,a,i,r,s,l,o,d,c,p,m){function u(e,n){var t;for(var a in n){if(void 0!=t)break;var i=n[a];i.name.split("/").pop()===e?t=i.item:i.nodes&&i.nodes.length>0&&(t=u(e,i.nodes))}return t}var g=i.localStorage;t.config=d,t.reverse=!1,t.predicate=["model.type","model.name"],t.order=function(e){t.reverse=t.predicate[1]===e&&!t.reverse,t.predicate[1]=e},t.query="",t.fileNavigator=new p,t.apiMiddleware=new m,t.uploadFileList=[],t.viewTemplate=g.getItem("viewTemplate")||"main-icons.html",t.fileList=[],t.temps=[],t.$watch("temps",function(){t.singleSelection()?(t.temp=t.singleSelection(),t.isReportOpen=!0,t.isDescriptionOpen=!0,t.temp.model.path&&"file"===t.temp.model.type&&"processed"===t.temp.model.processingStatus&&t.listReports()):(t.temp=new c({rights:644}),t.temp.multiple=!0),t.temp.revert()}),t.fileNavigator.onRefresh=function(){t.temps=[],t.query="",a.selectedModalPath=t.fileNavigator.currentPath},t.setTemplate=function(e){g.setItem("viewTemplate",e),t.viewTemplate=e},t.changeLanguage=function(e){return e?(g.setItem("language",e),r.use(e)):void r.use(g.getItem("language")||d.defaultLang)},t.isSelected=function(e){return t.temps.indexOf(e)!==-1},t.selectOrUnselect=function(e,n){var a=t.temps.indexOf(e),i=n&&3==n.which;if(n&&n.target.hasAttribute("prevent"))return void(t.temps=[]);if(!(!e||i&&t.isSelected(e))){if(n&&n.shiftKey&&!i){var r=t.fileList,s=r.indexOf(e),l=t.temps[0],o=r.indexOf(l),d=void 0;if(l&&r.indexOf(l)<s){for(t.temps=[];o<=s;)d=r[o],!t.isSelected(d)&&t.temps.push(d),o++;return}if(l&&r.indexOf(l)>s){for(t.temps=[];o>=s;)d=r[o],!t.isSelected(d)&&t.temps.push(d),o--;return}}return n&&!i&&(n.ctrlKey||n.metaKey)?void(t.isSelected(e)?t.temps.splice(a,1):t.temps.push(e)):void(t.temps=[e])}},t.singleSelection=function(){return 1===t.temps.length&&t.temps[0]},t.totalSelecteds=function(){return{total:t.temps.length}},t.selectionHas=function(e){return t.temps.find(function(n){return n&&n.model.type===e})},t.selectionHasOtherStatusThan=function(e){return t.temps.find(function(n){return n&&n.model.processingStatus!==e})},t.prepareNewFolder=function(){var e=new c(null,t.fileNavigator.currentPath);return t.temps=[e],e},t.smartClick=function(e){var n=t.config.allowedActions.pickFiles;if(e.isFolder())return t.fileNavigator.folderClick(e);if("function"==typeof t.config.pickCallback&&n){var a=t.config.pickCallback(e.model);if(a===!0)return}return e.isImage()?t.config.previewImagesInModal?t.openImagePreview(e):t.apiMiddleware.download(e,!0):e.isEditable()?t.openEditItem(e):void 0},t.openImagePreview=function(){var e=t.singleSelection();t.apiMiddleware.apiHandler.inprocess=!0,t.modal("imagepreview",null,!0).find("#imagepreview-target").attr("src",t.apiMiddleware.getUrl(e)).unbind("load error").on("load error",function(){t.apiMiddleware.apiHandler.inprocess=!1,t.$apply()})},t.openEditItem=function(){var e=t.singleSelection();t.apiMiddleware.getContent(e).then(function(n){e.tempModel.content=e.model.content=n.result}),t.modal("edit")},t.modal=function(e,a,i){if("remove"!==e||a){"startreportgeneration"!==e||a?"startbatchreportgeneration"!==e||a||(t.report={reportSettings:{}}):t.report={reportName:t.singleSelection().model.name+" - "+o("date")(new Date,"yyyy-MM-dd HH:mm:ss"),reportSettings:{}};var r=n("#"+e);return r.modal(a?"hide":"show"),t.apiMiddleware.apiHandler.error="",t.apiMiddleware.apiHandler.asyncSuccess=!1,!i||r}t.apiMiddleware.checkBeforeRemove(t.temps).then(function(a){t.removePreviewResult=a;var r=n("#"+e);return r.modal("show"),t.apiMiddleware.apiHandler.error="",t.apiMiddleware.apiHandler.asyncSuccess=!1,!i||r})},t.modalWithPathSelector=function(e){return a.selectedModalPath=t.fileNavigator.currentPath,t.modal(e)},t.isInThisPath=function(e){var n=t.fileNavigator.currentPath.join("/")+"/";return n.indexOf(e+"/")!==-1},t.edit=function(){t.apiMiddleware.edit(t.singleSelection()).then(function(){t.modal("edit",!0)})},t.changePermissions=function(){t.apiMiddleware.changePermissions(t.temps,t.temp).then(function(){t.modal("changepermissions",!0)})},t.download=function(){var e=t.singleSelection();if(!t.selectionHas("dir"))return e?t.apiMiddleware.download(e):t.apiMiddleware.downloadMultiple(t.temps)},t.copy=function(){var e=t.singleSelection();if(e){var n=e.tempModel.name.trim(),i=t.fileNavigator.fileNameExists(n);if(!n)return t.apiMiddleware.apiHandler.error=r.instant("error_invalid_filename"),!1;if(i&&h(e))return t.apiMiddleware.apiHandler.error=r.instant("error_existing_filename"),!1}t.apiMiddleware.copy(t.temps,a.selectedModalPath).then(function(){t.fileNavigator.refresh(),t.modal("copy",!0)})},t.compress=function(){var e=t.temp.tempModel.name.trim(),n=t.fileNavigator.fileNameExists(e);return e?n&&h(t.temp)?(t.apiMiddleware.apiHandler.error=r.instant("error_existing_filename"),!1):void t.apiMiddleware.compress(t.temps,e,a.selectedModalPath).then(function(){return t.fileNavigator.refresh(),t.config.compressAsync?void(t.apiMiddleware.apiHandler.asyncSuccess=!0):t.modal("compress",!0)},function(){t.apiMiddleware.apiHandler.asyncSuccess=!1}):(t.apiMiddleware.apiHandler.error=r.instant("error_invalid_filename"),!1)},t.extract=function(){var e=t.temp,n=t.temp.tempModel.name.trim(),i=t.fileNavigator.fileNameExists(n);return n?i&&h(t.temp)?(t.apiMiddleware.apiHandler.error=r.instant("error_existing_filename"),!1):void t.apiMiddleware.extract(e,n,a.selectedModalPath).then(function(){return t.fileNavigator.refresh(),t.config.extractAsync?void(t.apiMiddleware.apiHandler.asyncSuccess=!0):t.modal("extract",!0)},function(){t.apiMiddleware.apiHandler.asyncSuccess=!1}):(t.apiMiddleware.apiHandler.error=r.instant("error_invalid_filename"),!1)},t.remove=function(){t.apiMiddleware.remove(t.temps).then(function(){t.fileNavigator.refresh(),t.modal("remove",!0)})},t.move=function(){var e=t.singleSelection()||t.temps[0];return e&&h(e)?(t.apiMiddleware.apiHandler.error=r.instant("error_cannot_move_same_path"),!1):void t.apiMiddleware.move(t.temps,a.selectedModalPath).then(function(){t.fileNavigator.refresh(),t.modal("move",!0)})},t.rename=function(){var e=t.singleSelection(),n=e.tempModel.name,a=e.tempModel.path.join("")===e.model.path.join("");return n?a&&t.fileNavigator.fileNameExists(n)?(t.apiMiddleware.apiHandler.error=r.instant("error_existing_filename"),!1):void t.apiMiddleware.rename(e).then(function(){t.fileNavigator.refresh(),t.modal("rename",!0)}):(t.apiMiddleware.apiHandler.error=r.instant("error_invalid_filename"),!1)},t.createFolder=function(){var e=t.singleSelection(),n=e.tempModel.name;return n?t.fileNavigator.fileNameExists(n)?t.apiMiddleware.apiHandler.error=r.instant("error_creating_folder_already_exists"):void t.apiMiddleware.createFolder(e).then(function(){t.fileNavigator.refresh(),t.modal("newfolder",!0)}):t.apiMiddleware.apiHandler.error=r.instant("error_invalid_filename")},t.addForUpload=function(e){t.uploadFileList=t.uploadFileList.concat(e),t.modal("uploadfile")},t.removeFromUpload=function(e){t.uploadFileList.splice(e,1)},t.uploadFiles=function(){t.apiMiddleware.upload(t.uploadFileList,t.fileNavigator.currentPath).then(function(){t.fileNavigator.refresh(),t.uploadFileList=[],t.modal("uploadfile",!0)},function(e){console.log("upload data",e,t.fileNavigator.currentPath);var n=r.instant("error_uploading_files");e&&e.result&&e.result.error&&(n=e.result.error),e&&e.result&&409==e.result.status&&(n=r.instant("error_uploading_files_file_already_exists")),e&&403==e.code&&(n=r.instant("error_uploading_files_wrong_destination")),t.apiMiddleware.apiHandler.error=n})},t.prepareReportGeneration=function(){t.modalFileNavigator=new p},t.startReportGeneration=function(e){if(t.reportStartSubmitted=!0,!e.reportName)return void(t.apiMiddleware.apiHandler.error=r.instant("REPORT_GENERATION_MODAL.REPORT_NAME_IS_REQUIRED"));if(!e.reportSettings.myFiles&&!e.reportSettings.institutionFiles&&!e.reportSettings.webResources)return void(t.apiMiddleware.apiHandler.error=r.instant("REPORT_GENERATION_MODAL.REPORT_TARGET_REQUIRED"));var n=t.temps[0].model.fullPath(),a=t.temps[0].model.name;e.filePath=n,e.fileName=a,t.apiMiddleware.startReportGeneration(e).then(function(){t.fileNavigator.refresh(),t.modal("startreportgeneration",!0)})},t.startBatchReportGeneration=function(n){if(t.batchReportStartSubmitted=!0,!n.reportSettings.myFiles&&!n.reportSettings.institutionFiles&&!n.reportSettings.webResources)return void(t.apiMiddleware.apiHandler.error=r.instant("REPORT_GENERATION_MODAL.REPORT_TARGET_REQUIRED"));var a=[];e.forEach(t.temps,function(e){a.push({path:e.model.fullPath(),name:e.model.name})}),n.selectedDocuments=a,t.apiMiddleware.startBatchReportGeneration(n).then(function(){t.fileNavigator.refresh(),t.modal("startbatchreportgeneration",!0)})},t.listReports=function(){var e=t.temps[0].model.fullPath();t.apiMiddleware.listReports(e).then(function(e){t.currentReports=e.result,t.isReportOpen=!0,t.isDescriptionOpen=!0,t.reportLimit=2,t.isLimited=!0})},t.getReportLimit=function(){return t.isLimited||!t.currentReports?t.reportLimit:t.currentReports.length},t.toggleFullReportList=function(){t.isLimited=!t.isLimited},t.openReport=function(e){s.path(d.reportViewBasePath+e)},t.shouldDescriptionBeOpen=function(){return 1==t.temps.length&&t.temps[0].model&&t.temps[0].model.name},t.allowActionsWithSingleSelection=function(){return 1===t.temps.length&&t.temps[0]&&t.temps[0].model&&1!=t.temps[0].model.base},t.allowActionsWithMultiSelection=function(){var n=!0;return t.temps.length>1&&(e.forEach(t.temps,function(e){e.model&&e.model.base&&1==e.model.base&&(n=!1)}),n)};var h=function(e){var n=a.selectedModalPath.join(""),t=e&&e.model.path.join("");return t===n},f=function(e){var n=i.location.search.substr(1).split("&").filter(function(n){return e===n.split("=")[0]});return n[0]&&n[0].split("=")[1]||void 0};t.changeLanguage(f("lang")),t.isWindows="Windows"===f("server"),t.fileNavigator.refresh(),t.refreshList=function(){t.fileNavigator.refresh()},t.getClassForScore=function(e){var n="badge ";return e<.25?n+="low":e<.5?n+="medium":e<.75?n+="high":e<=1&&(n+="very-high"),n},t.update=l(function(){t.fileNavigator.updateStatus()},1e4),t.stopUpdate=function(){e.isDefined(t.update)&&(l.cancel(t.update),t.update=void 0)},t.translateDirName=function(e){var n=u(e,t.fileNavigator.history);return t.translateItem(n)},t.translateItem=function(e){if(e||e.model||e.model.name){if(!e.model.base)return e.model.name;if(e.model.name){var n=e.model.name;if(n.indexOf(":")>-1){var t=n.indexOf(":");n=n.substring(0,t)}var a=r.instant(n,e.model.nameVariables);return a}}},t.$on("$destroy",function(){t.stopUpdate()})}])}(angular,jQuery),function(e){"use strict";e.module("FileManagerApp").controller("ModalFileManagerCtrl",["$scope","$rootScope","fileNavigator",function(e,n,t){e.reverse=!1,e.predicate=["model.type","model.name"],e.fileNavigator=new t,n.selectedModalPath=[],e.order=function(n){e.reverse=e.predicate[1]===n&&!e.reverse,e.predicate[1]=n},e.select=function(t){n.selectedModalPath=t.model.fullPath().split("/"),e.modal("selector",!0)},e.selectCurrent=function(){n.selectedModalPath=e.fileNavigator.currentPath,e.modal("selector",!0)},e.selectedFilesAreChildOfPath=function(n){var t=n.model.fullPath();return e.temps.find(function(e){var n=e.model.fullPath();if(t==n)return!0})},n.openNavigator=function(n){e.fileNavigator.currentPath=n,e.fileNavigator.refresh(),e.modal("selector")},n.getSelectedPath=function(){var t=n.selectedModalPath.filter(Boolean),a="/"+t.join("/");return e.singleSelection()&&!e.singleSelection().isFolder()&&(a+="/"+e.singleSelection().tempModel.name),a.replace(/\/\//,"/")}}])}(angular),function(e){"use strict";var n=e.module("FileManagerApp");n.directive("angularFilemanager",["$parse","fileManagerConfig",function(e,n){return{restrict:"EA",templateUrl:n.tplPath+"/main.html"}}]),n.directive("ngFile",["$parse",function(e){return{restrict:"A",link:function(n,t,a){var i=e(a.ngFile),r=i.assign;t.bind("change",function(){n.$apply(function(){r(n,t[0].files)})})}}}]),n.directive("ngRightClick",["$parse",function(e){return function(n,t,a){var i=e(a.ngRightClick);t.bind("contextmenu",function(e){n.$apply(function(){e.preventDefault(),i(n,{$event:e})})})}}])}(angular),function(e){"use strict";e.module("FileManagerApp").service("chmod",function(){var e=function(e){if(this.owner=this.getRwxObj(),this.group=this.getRwxObj(),this.others=this.getRwxObj(),e){var n=isNaN(e)?this.convertfromCode(e):this.convertfromOctal(e);if(!n)throw new Error("Invalid chmod input data (%s)".replace("%s",e));this.owner=n.owner,this.group=n.group,this.others=n.others}};return e.prototype.toOctal=function(e,n){var t=[];return["owner","group","others"].forEach(function(e,n){t[n]=this[e].read&&this.octalValues.read||0,t[n]+=this[e].write&&this.octalValues.write||0,t[n]+=this[e].exec&&this.octalValues.exec||0}.bind(this)),(e||"")+t.join("")+(n||"")},e.prototype.toCode=function(e,n){var t=[];return["owner","group","others"].forEach(function(e,n){t[n]=this[e].read&&this.codeValues.read||"-",t[n]+=this[e].write&&this.codeValues.write||"-",t[n]+=this[e].exec&&this.codeValues.exec||"-"}.bind(this)),(e||"")+t.join("")+(n||"")},e.prototype.getRwxObj=function(){return{read:!1,write:!1,exec:!1}},e.prototype.octalValues={read:4,write:2,exec:1},e.prototype.codeValues={read:"r",write:"w",exec:"x"},e.prototype.convertfromCode=function(e){if(e=(""+e).replace(/\s/g,""),e=10===e.length?e.substr(1):e,/^[-rwxts]{9}$/.test(e)){var n=[],t=e.match(/.{1,3}/g);for(var a in t){var i=this.getRwxObj();i.read=/r/.test(t[a]),i.write=/w/.test(t[a]),i.exec=/x|t/.test(t[a]),n.push(i)}return{owner:n[0],group:n[1],others:n[2]}}},e.prototype.convertfromOctal=function(e){if(e=(""+e).replace(/\s/g,""),e=4===e.length?e.substr(1):e,/^[0-7]{3}$/.test(e)){var n=[],t=e.match(/.{1}/g);for(var a in t){var i=this.getRwxObj();i.read=/[4567]/.test(t[a]),i.write=/[2367]/.test(t[a]),i.exec=/[1357]/.test(t[a]),n.push(i)}return{owner:n[0],group:n[1],others:n[2]}}},e})}(angular),function(e){"use strict";e.module("FileManagerApp").factory("item",["fileManagerConfig","chmod",function(n,t){var a=function(n,a){var i={objectId:n&&n.objectId||"",name:n&&n.name||"",nameVariables:n&&n.nameVariables,path:a||[],type:n&&n.type||"file",size:n&&parseInt(n.size||0),creationDate:n&&new Date(n.creationDate),modificationDate:n&&new Date(n.modificationDate),perms:new t(n&&n.rights),content:n&&n.content||"",recursive:!1,fullPath:function(){var e=this.path.filter(Boolean);return("/"+e.join("/")+"/"+this.name).replace(/\/\//,"/")},order:n&&parseInt(n.order||0),base:n&&n.base,processingStatus:n&&n.processingStatus,owner:n&&n.owner};this.error="",this.processing=!1,this.model=e.copy(i),this.tempModel=e.copy(i)};return a.prototype.update=function(){e.extend(this.model,e.copy(this.tempModel))},a.prototype.revert=function(){e.extend(this.tempModel,e.copy(this.model)),this.error=""},a.prototype.isFolder=function(){return"dir"===this.model.type},a.prototype.isEditable=function(){return!this.isFolder()&&n.isEditableFilePattern.test(this.model.name)},a.prototype.isImage=function(){return n.isImageFilePattern.test(this.model.name)},a.prototype.isCompressible=function(){return this.isFolder()},a.prototype.isExtractable=function(){return!this.isFolder()&&n.isExtractableFilePattern.test(this.model.name)},a.prototype.isSelectable=function(){return this.isFolder()&&n.allowedActions.pickFolders||!this.isFolder()&&n.allowedActions.pickFiles},a}])}(angular),function(e){"use strict";var n=e.module("FileManagerApp");n.filter("strLimit",["$filter",function(e){return function(n,t,a){return n.length<=t?n:e("limitTo")(n,t)+(a||"...")}}]),n.filter("fileExtension",["$filter",function(e){return function(n){return/\./.test(n)&&e("strLimit")(n.split(".").pop(),3,"..")||""}}]),n.filter("formatDate",["$filter",function(){return function(e){return e instanceof Date?e.toISOString().substring(0,19).replace("T"," "):(e.toLocaleString||e.toString).apply(e)}}]),n.filter("humanReadableFileSize",["$filter","fileManagerConfig",function(e,n){var t=[" kB"," MB"," GB"," TB","PB","EB","ZB","YB"],a=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];return function(e){var i=-1,r=e;do r/=1024,i++;while(r>1024);var s=n.useBinarySizePrefixes?a[i]:t[i];return Math.max(r,.1).toFixed(1)+" "+s}}])}(angular),function(e){"use strict";e.module("FileManagerApp").provider("fileManagerConfig",function(){var n={appName:"angular-filemanager v1.5",defaultLang:"en",listUrl:"bridges/php/handler.php",uploadUrl:"bridges/php/handler.php",renameUrl:"bridges/php/handler.php",copyUrl:"bridges/php/handler.php",moveUrl:"bridges/php/handler.php",removeUrl:"bridges/php/handler.php",checkBeforeRemoveUrl:"",editUrl:"bridges/php/handler.php",getContentUrl:"bridges/php/handler.php",createFolderUrl:"bridges/php/handler.php",downloadFileUrl:"bridges/php/handler.php",downloadMultipleUrl:"bridges/php/handler.php",compressUrl:"bridges/php/handler.php",extractUrl:"bridges/php/handler.php",permissionsUrl:"bridges/php/handler.php",reportGenerationUrl:"",batchReportGenerationUrl:"",reportListUrl:"",reportViewBasePath:"",authenticationUrl:"",searchForm:!0,sidebar:!0,breadcrumb:!0,allowedActions:{upload:!0,rename:!0,move:!0,copy:!0,edit:!0,changePermissions:!0,compress:!0,compressChooseName:!0,extract:!0,download:!0,downloadMultiple:!0,preview:!0,remove:!0,createFolder:!0,pickFiles:!1,pickFolders:!1,reportgeneration:!1},multipleDownloadFileName:"angular-filemanager.zip",showExtensionIcons:!0,showSizeForDirectories:!1,useBinarySizePrefixes:!1,downloadFilesByAjax:!0,previewImagesInModal:!0,enablePermissionsRecursive:!0,compressAsync:!1,extractAsync:!1,pickCallback:null,isEditableFilePattern:/\.(txt|diff?|patch|svg|asc|cnf|cfg|conf|html?|.html|cfm|cgi|aspx?|ini|pl|py|md|css|cs|js|jsp|log|htaccess|htpasswd|gitignore|gitattributes|env|json|atom|eml|rss|markdown|sql|xml|xslt?|sh|rb|as|bat|cmd|cob|for|ftn|frm|frx|inc|lisp|scm|coffee|php[3-6]?|java|c|cbl|go|h|scala|vb|tmpl|lock|go|yml|yaml|tsv|lst)$/i,isImageFilePattern:/\.(jpe?g|gif|bmp|png|svg|tiff?)$/i,isExtractableFilePattern:/\.(gz|tar|rar|g?zip)$/i,tplPath:"src/templates"};return{$get:function(){return n},set:function(t){e.extend(n,t)}}})}(angular),function(e){"use strict";e.module("FileManagerApp").config(["$translateProvider",function(e){}])}(angular),function(e,n){"use strict";e.module("FileManagerApp").service("apiHandler",["$http","$q","$window","$translate","Upload",function(e,t,a,i,r){e.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var s=function(){this.inprocess=!1,this.asyncSuccess=!1,this.error=""};return s.prototype.deferredHandler=function(e,n,t,a){return e&&"object"==typeof e||a||(this.error="Error %s - Bridge response error, please check the API docs or this ajax response.".replace("%s",t)),404==t&&(this.error="Error 404 - Backend bridge is not working, please check the ajax response."),e&&e.result&&e.result.error&&(this.error=e.result.error),!this.error&&e&&e.error&&(this.error=e.error.message),!this.error&&a&&(this.error=a),null!=e&&("object"!=typeof e?e={result:e,code:t}:e.code=t),this.error?n.reject(e):n.resolve(e)},s.prototype.list=function(n,a,i,r){var s=this,l=i||s.deferredHandler,o=t.defer(),d={action:"list",path:a};return r&&(d.modifiedSince=r),s.inprocess=!0,s.error="",e.post(n,d).success(function(e,n){l(e,o,n)}).error(function(e,n){l(e,o,n,"Unknown error listing, check the response")})["finally"](function(){s.inprocess=!1}),o.promise},s.prototype.copy=function(n,a,r,s){var l=this,o=t.defer(),d={action:"copy",items:a,newPath:r};return s&&1===a.length&&(d.singleFilename=s),l.inprocess=!0,l.error="",e.post(n,d).success(function(e,n){l.deferredHandler(e,o,n)}).error(function(e,n){l.deferredHandler(e,o,n,i.instant("error_copying"))})["finally"](function(){l.inprocess=!1}),o.promise},s.prototype.move=function(n,a,r){var s=this,l=t.defer(),o={action:"move",items:a,newPath:r};return s.inprocess=!0,s.error="",e.post(n,o).success(function(e,n){s.deferredHandler(e,l,n)}).error(function(e,n){s.deferredHandler(e,l,n,i.instant("error_moving"))})["finally"](function(){s.inprocess=!1}),l.promise},s.prototype.remove=function(n,a){var r=this,s=t.defer(),l={action:"remove",items:a};return r.inprocess=!0,r.error="",e.post(n,l).success(function(e,n){r.deferredHandler(e,s,n)}).error(function(e,n){r.deferredHandler(e,s,n,i.instant("error_deleting"))})["finally"](function(){r.inprocess=!1}),s.promise},s.prototype.checkBeforeRemove=function(n,a){var r=this,s=t.defer(),l={action:"remove",items:a};return r.inprocess=!0,r.error="",e.post(n,l).success(function(e,n){r.deferredHandler(e,s,n)}).error(function(e,n){r.deferredHandler(e,s,n,i.instant("error_delete_check"))})["finally"](function(){r.inprocess=!1}),s.promise},s.prototype.upload=function(e,n,a){var i=this,s=t.defer();i.inprocess=!0,i.progress=0,i.error="";for(var l={destination:n},o=0;o<a.length;o++)l["file-"+o]=a[o];return a&&a.length&&r.upload({url:e,data:l}).then(function(e){i.deferredHandler(e.data,s,e.status)},function(e){i.deferredHandler(e.data,s,e.status,"Unknown error uploading files")},function(e){i.progress=Math.min(100,parseInt(100*e.loaded/e.total))-1})["finally"](function(){i.inprocess=!1,i.progress=0}),s.promise},s.prototype.getContent=function(n,a){var r=this,s=t.defer(),l={action:"getContent",item:a};return r.inprocess=!0,r.error="",e.post(n,l).success(function(e,n){r.deferredHandler(e,s,n)}).error(function(e,n){r.deferredHandler(e,s,n,i.instant("error_getting_content"))})["finally"](function(){r.inprocess=!1}),s.promise},s.prototype.edit=function(n,a,r){var s=this,l=t.defer(),o={action:"edit",item:a,content:r};return s.inprocess=!0,s.error="",e.post(n,o).success(function(e,n){s.deferredHandler(e,l,n)}).error(function(e,n){s.deferredHandler(e,l,n,i.instant("error_modifying"))})["finally"](function(){s.inprocess=!1}),l.promise},s.prototype.rename=function(n,a,r){var s=this,l=t.defer(),o={action:"rename",item:a,newItemPath:r};return s.inprocess=!0,s.error="",e.post(n,o).success(function(e,n){s.deferredHandler(e,l,n)}).error(function(e,n){s.deferredHandler(e,l,n,i.instant("error_renaming"))})["finally"](function(){s.inprocess=!1}),l.promise},s.prototype.getUrl=function(e,t,a){var i={action:"download",path:t,objectId:a};return t&&[e,n.param(i)].join("?")},s.prototype.download=function(n,r,s,l,o,d){var c=this,p=this.getUrl(n,r,l);if(!o||d||!a.saveAs)return!a.saveAs&&a.console.log("Your browser dont support ajax download, downloading by default"),!!a.open(p,"_blank","");var m=t.defer();return c.inprocess=!0,e.get(p).success(function(e){var n=new a.Blob([e]);m.resolve(e),a.saveAs(n,s)}).error(function(e,n){c.deferredHandler(e,m,n,i.instant("error_downloading"))})["finally"](function(){c.inprocess=!1}),m.promise},s.prototype.downloadMultiple=function(r,s,l,o,d){var c=this,p=t.defer(),m={action:"downloadMultiple",items:s,toFilename:l},u=[r,n.param(m)].join("?");return o&&!d&&a.saveAs?(c.inprocess=!0,e.get(r).success(function(e){var n=new a.Blob([e]);p.resolve(e),a.saveAs(n,l)}).error(function(e,n){c.deferredHandler(e,p,n,i.instant("error_downloading"))})["finally"](function(){c.inprocess=!1}),p.promise):(!a.saveAs&&a.console.log("Your browser dont support ajax download, downloading by default"),!!a.open(u,"_blank",""))},s.prototype.compress=function(n,a,r,s){var l=this,o=t.defer(),d={action:"compress",items:a,destination:s,compressedFilename:r};return l.inprocess=!0,l.error="",e.post(n,d).success(function(e,n){l.deferredHandler(e,o,n)}).error(function(e,n){l.deferredHandler(e,o,n,i.instant("error_compressing"))})["finally"](function(){l.inprocess=!1}),o.promise},s.prototype.extract=function(n,a,r,s){var l=this,o=t.defer(),d={action:"extract",item:a,destination:s,folderName:r};return l.inprocess=!0,l.error="",e.post(n,d).success(function(e,n){l.deferredHandler(e,o,n)}).error(function(e,n){l.deferredHandler(e,o,n,i.instant("error_extracting"))})["finally"](function(){l.inprocess=!1}),o.promise},s.prototype.changePermissions=function(n,a,r,s,l){var o=this,d=t.defer(),c={action:"changePermissions",items:a,perms:r,permsCode:s,recursive:!!l};return o.inprocess=!0,o.error="",e.post(n,c).success(function(e,n){o.deferredHandler(e,d,n)}).error(function(e,n){o.deferredHandler(e,d,n,i.instant("error_changing_perms"))})["finally"](function(){o.inprocess=!1}),d.promise},s.prototype.createFolder=function(n,a){var r=this,s=t.defer(),l={action:"createFolder",newPath:a};return r.inprocess=!0,r.error="",e.post(n,l).success(function(e,n){r.deferredHandler(e,s,n)}).error(function(e,n){409==n?r.deferredHandler(e,s,n,i.instant("error_creating_folder_already_exists")):r.deferredHandler(e,s,n,i.instant("error_creating_folder"))})["finally"](function(){r.inprocess=!1}),s.promise},s.prototype.startReportGeneration=function(n,a){var r=this,s=t.defer(),l=a;return r.inprocess=!0,r.error="",e.post(n,l).success(function(e,n){r.deferredHandler({result:e},s,n)}).error(function(e,n){409===n?r.deferredHandler(e,s,n,i.instant("error_not_unique_report_name")):r.deferredHandler(e,s,n,i.instant("error_starting_report_generation"))})["finally"](function(){r.inprocess=!1}),s.promise},s.prototype.startBatchReportGeneration=function(n,a){var r=this,s=t.defer(),l=a;return r.inprocess=!0,r.error="",e.post(n,l).success(function(e,n){r.deferredHandler({result:e},s,n)}).error(function(e,n){r.deferredHandler(e,s,n,i.instant("error_starting_batch_report_generation"))})["finally"](function(){r.inprocess=!1}),s.promise},s.prototype.listReports=function(n,a){var r=this,s=t.defer(),l={method:"POST",url:n,headers:{"Content-Type":"text/plain"},data:a};return r.inprocess=!0,r.error="",e(l).success(function(e,n){r.deferredHandler({result:e},s,n)}).error(function(e,n){r.deferredHandler(e,s,n,i.instant("error_listing_reports"))})["finally"](function(){r.inprocess=!1}),s.promise},s.prototype.isAuthenticated=function(n){var a=this,r=t.defer();if(void 0===n||""===n)return r.promise;var s={method:"GET",url:n};return a.inprocess=!0,a.error="",e(s).success(function(e,n){a.deferredHandler({result:e},r,n)}).error(function(e,n){a.deferredHandler(e,r,n,i.instant("error_authenticating_user"))})["finally"](function(){a.inprocess=!1}),r.promise},s}])}(angular,jQuery),function(e){"use strict";e.module("FileManagerApp").service("apiMiddleware",["$window","fileManagerConfig","apiHandler",function(e,n,t){var a=function(){this.apiHandler=new t};return a.prototype.getPath=function(e){return"/"+e.join("/")},a.prototype.getFileList=function(e){return(e||[]).map(function(e){return e&&e.model.fullPath()})},a.prototype.getFilePath=function(e){return e&&e.model.fullPath()},a.prototype.list=function(e,t,a){return this.apiHandler.list(n.listUrl,this.getPath(e),t,a)},a.prototype.copy=function(e,t){var a=this.getFileList(e),i=1===a.length?e[0].tempModel.name:void 0;return this.apiHandler.copy(n.copyUrl,a,this.getPath(t),i)},a.prototype.move=function(e,t){var a=this.getFileList(e);return this.apiHandler.move(n.moveUrl,a,this.getPath(t))},a.prototype.remove=function(e){var t=this.getFileList(e);return this.apiHandler.remove(n.removeUrl,t)},a.prototype.checkBeforeRemove=function(e){var t=this.getFileList(e);return this.apiHandler.checkBeforeRemove(n.checkBeforeRemoveUrl,t)},a.prototype.upload=function(t,a){if(!e.FormData)throw new Error("Unsupported browser version");var i=this.getPath(a);return this.apiHandler.upload(n.uploadUrl,i,t)},a.prototype.getContent=function(e){var t=this.getFilePath(e);return this.apiHandler.getContent(n.getContentUrl,t)},a.prototype.edit=function(e){var t=this.getFilePath(e);return this.apiHandler.edit(n.editUrl,t,e.tempModel.content)},a.prototype.rename=function(e){var t=this.getFilePath(e),a=e.tempModel.fullPath();return this.apiHandler.rename(n.renameUrl,t,a)},a.prototype.getUrl=function(e){var t=this.getFilePath(e);return this.apiHandler.getUrl(n.downloadFileUrl,t)},a.prototype.download=function(e,t){var a=this.getFilePath(e),i=e.model.name,r=e.model.objectId;if(!e.isFolder())return this.apiHandler.download(n.downloadFileUrl,a,i,r,n.downloadFilesByAjax,t)},a.prototype.downloadMultiple=function(e,t){var a=this.getFileList(e),i=(new Date).getTime().toString().substr(8,13),r=i+"-"+n.multipleDownloadFileName;return this.apiHandler.downloadMultiple(n.downloadMultipleUrl,a,r,n.downloadFilesByAjax,t)},a.prototype.compress=function(e,t,a){var i=this.getFileList(e);return this.apiHandler.compress(n.compressUrl,i,t,this.getPath(a))},a.prototype.extract=function(e,t,a){var i=this.getFilePath(e);return this.apiHandler.extract(n.extractUrl,i,t,this.getPath(a))},a.prototype.changePermissions=function(e,t){var a=this.getFileList(e),i=t.tempModel.perms.toCode(),r=t.tempModel.perms.toOctal(),s=!!t.tempModel.recursive;return this.apiHandler.changePermissions(n.permissionsUrl,a,i,r,s)},a.prototype.createFolder=function(e){var t=e.tempModel.fullPath();return this.apiHandler.createFolder(n.createFolderUrl,t)},a.prototype.startReportGeneration=function(e){return this.apiHandler.startReportGeneration(n.reportGenerationUrl,e)},a.prototype.startBatchReportGeneration=function(e){return this.apiHandler.startBatchReportGeneration(n.batchReportGenerationUrl,e)},a.prototype.listReports=function(e){return this.apiHandler.listReports(n.reportListUrl,e)},a.prototype.isAuthenticated=function(e){return this.apiHandler.isAuthenticated(n.authenticationUrl)},a}])}(angular),function(e){"use strict";e.module("FileManagerApp").service("fileNavigator",["apiMiddleware","fileManagerConfig","item",function(n,t,a){var i=function(){this.apiMiddleware=new n,this.requesting=!1,this.fileList=[],this.currentPath=[],this.history=[],this.error="",this.onRefresh=function(){}};return i.prototype.deferredHandler=function(e,n,t,a){return e&&"object"==typeof e||a||(this.error="Error %s - Bridge response error, please check the API docs or this ajax response.".replace("%s",t)),404==t&&(this.error="Error 404 - Backend bridge is not working, please check the ajax response."),e&&e.result&&e.result.error&&(this.error=e.result.error),!this.error&&e&&e.error&&(this.error=e.error.message),!this.error&&a&&(this.error=a),this.error?n.reject(e):n.resolve(e)},i.prototype.list=function(e){return this.apiMiddleware.list(this.currentPath,this.deferredHandler.bind(this),e)},i.prototype.initCurrentPath=function(e){return this.currentPath=e},i.prototype.refresh=function(){var e=this;void 0!==e.currentPath&&void 0!==e.currentPath.length&&0!==e.currentPath.length||(e.currentPath=[]);var n=e.currentPath.join("/");return e.requesting=!0,e.fileList=[],e.list().then(function(t){e.fileList=(t.result||[]).map(function(n){return new a(n,e.currentPath)}),e.buildTree(n),e.onRefresh()})["finally"](function(){e.requesting=!1})},i.prototype.updateStatus=function(){var n=this;n.apiMiddleware.isAuthenticated().then(function(t){if(void 0!==t.result&&void 0!==t.result.userId){void 0!==n.currentPath&&void 0!==n.currentPath.length&&0!==n.currentPath.length||(n.currentPath=[]);var a=(n.currentPath.join("/"),
(new Date).getTime()-1e4);return n.list(a).then(function(t){t.result&&t.result.length>0&&e.forEach(t.result,function(t){e.forEach(n.fileList,function(e){e.model.name===t.name&&(e.model.modificationDate=new Date(t.modificationDate),e.model.processingStatus=t.processingStatus)})})})["finally"](function(){})}},function(e){})},i.prototype.buildTree=function(e){function n(e,t,a){var i=a?a+"/"+t.model.name:t.model.name;if(e.name&&e.name.trim()&&0!==a.trim().indexOf(e.name)&&(e.nodes=[]),e.name!==a)e.nodes.forEach(function(e){n(e,t,a)});else{for(var r in e.nodes)if(e.nodes[r].name===i)return;e.nodes.push({item:t,name:i,nodes:[]})}e.nodes=e.nodes.sort(function(e,n){return e.name.toLowerCase()<n.name.toLowerCase()?-1:e.name.toLowerCase()===n.name.toLowerCase()?0:1})}function t(e,n){n.push(e);for(var a in e.nodes)t(e.nodes[a],n)}function i(e,n){return e.filter(function(e){return e.name===n})[0]}var r=[],s={};!this.history.length&&this.history.push({name:"",nodes:[]}),t(this.history[0],r),s=i(r,e),s&&(s.nodes=[]);for(var l in this.fileList){var o=this.fileList[l];o instanceof a&&o.isFolder()&&n(this.history[0],o,e)}},i.prototype.folderClick=function(e){this.currentPath=[],e&&e.isFolder()&&(this.currentPath=e.model.fullPath().split("/").splice(1)),this.refresh()},i.prototype.upDir=function(){this.currentPath[0]&&(this.currentPath=this.currentPath.slice(0,-1),this.refresh())},i.prototype.goTo=function(e){this.currentPath=this.currentPath.slice(0,e+1),this.refresh()},i.prototype.fileNameExists=function(e){return this.fileList.find(function(n){return e.trim&&n.model.name.trim()===e.trim()})},i.prototype.listHasFolders=function(){return this.fileList.find(function(e){return"dir"===e.model.type})},i}])}(angular),angular.module("FileManagerApp").run(["$templateCache",function(e){e.put("src/templates/current-folder-breadcrumb.html",'<ol class="breadcrumb">\n    <!--<li>\n        <a href="" ng-click="fileNavigator.goTo(-1)">\n            {{ config.appName }}\n        </a>\n    </li>-->\n\n    <li ng-repeat="(key, dir) in fileNavigator.currentPath track by key" ng-class="{\'active\':$last}" class="animated fast fadeIn">\n        <a href="" ng-show="!$last" ng-click="fileNavigator.goTo(key)">\n            {{ translateDirName(dir) | strLimit : 30}}\n        </a>\n        <span ng-show="$last">\n            {{ translateDirName(dir) }}\n        </span>\n    </li>\n</ol>\n'),e.put("src/templates/description.html",'<div ng-cloak class="details">\n\n  <uib-accordion close-others="false" class="accordion-custom">\n    <div uib-accordion-group class="panel-default"\n      ng-if="temps[0].model.type === \'file\' && temps[0].model.processingStatus === \'processed\'"\n      is-open="isReportOpen">\n      <uib-accordion-heading>\n        {{ \'report\' | translate }}\n      </uib-accordion-heading>\n      <div class="text-center">\n        <button tabindex="-1" class="btn btn-primary btn-xs" ng-click="modal(\'startreportgeneration\') && prepareReportGeneration()">\n          <i class="glyphicon glyphicon-play"></i> {{\'startreportgeneration\' | translate}}\n        </button>\n      </div>\n      <div class="report-data" ng-repeat="report in currentReports | orderBy:\'-startTime\' | limitTo:getReportLimit() track by $index" ng-if="currentReports">\n        <div class="row">\n          <div class="col-sm-12">\n            {{ report.reportName }}\n            <span ng-if="report.reportStatus === \'SUCCESS\'" ng-class="getClassForScore(report.overallScore)">{{ report.overallScore * 100 | number:0}}%</span>\n          </div>\n        </div>\n\n        <div class="row">\n          <div class="col-sm-12">\n              <label>{{ \'startTime\' | translate }}</label>\n          </div>\n          <div class="col-sm-12">\n              {{ report.startTime | date:\'yyyy-MM-dd HH:mm:ss\' }}\n          </div>\n        </div>\n\n        <div class="row">\n          <div class="col-sm-12">\n              <label>{{ \'REPORT_STATUS.NAME\' | translate }}</label>\n          </div>\n          <div class="col-sm-12">\n              {{ \'REPORT_STATUS.\' + report.reportStatus | translate }}\n          </div>\n        </div>\n\n        <div class="text-center">\n          <button tabindex="-1" class="btn btn-default btn-xs" ng-click="openReport(report.reportId)" ng-disabled="report.reportStatus !== \'SUCCESS\'">\n            {{\'view_report\' | translate}}\n          </button>\n        </div>\n      </div>\n      <div ng-if="currentReports.length > reportLimit && isLimited"><a href="" ng-click="toggleFullReportList()">{{ \'showmorereports\' | translate}}</a></div>\n      <div ng-if="currentReports.length > reportLimit && !isLimited"><a href="" ng-click="toggleFullReportList()">{{ \'showlessreports\' | translate}}</a></div>\n    </div>\n    <div uib-accordion-group class="panel-default accordion-custom"\n      is-open="isDescriptionOpen">\n      <uib-accordion-heading>\n        {{ \'description\' | translate }}\n      </uib-accordion-heading>\n      <div class="row">\n        <div class="col-sm-12">\n            <label>{{ \'name\' | translate }}</label>\n        </div>\n\n        <div class="col-sm-12 filename">\n            {{ temps.length ? (temps[0].model.name | translate) : "" }}\n        </div>\n      </div>\n\n      <div class="row">\n        <div class="col-sm-12">\n            <label>{{ \'owner\' | translate }}</label>\n        </div>\n\n        <div class="col-sm-12">\n            {{ temps.length ? temps[0].model.owner : "" }}\n        </div>\n      </div>\n\n      <div class="row">\n        <div class="col-sm-12">\n            <label>{{ \'size\' | translate }}</label>\n        </div>\n\n        <div class="col-sm-12">\n            {{ temps.length ?\n              (temps[0].model.size | humanReadableFileSize)  : "" }}\n        </div>\n\n      </div>\n\n      <div class="row">\n        <div class="col-sm-12">\n            <label>{{ \'date\' | translate }}</label>\n        </div>\n\n        <div class="col-sm-12">\n            {{ temps.length ?\n              (temps[0].model.creationDate | date:\'yyyy-MM-dd HH:mm:ss\') : "" }}\n        </div>\n      </div>\n    </div>\n  </uib-accordion>\n</div>\n'),e.put("src/templates/item-context-menu.html",'<div id="context-menu" class="dropdown clearfix animated fast fadeIn">\n    <ul class="dropdown-menu dropdown-right-click" role="menu" aria-labelledby="dropdownMenu" ng-show="temps.length">\n\n        <li ng-show="config.allowedActions.reportgeneration && singleSelection() && !singleSelection().isFolder() && singleSelection().model.processingStatus === \'processed\'">\n            <a href="" tabindex="-1" ng-click="modal(\'startreportgeneration\')">\n                <i class="glyphicon glyphicon-play"></i> {{\'startreportgeneration\' | translate}}\n            </a>\n        </li>\n\n        <li ng-show="config.allowedActions.reportgeneration && !singleSelection() && !selectionHasOtherStatusThan(\'processed\')">\n            <a href="" tabindex="-1" ng-click="modal(\'startbatchreportgeneration\')">\n                <i class="glyphicon glyphicon-play"></i> {{\'startbatchreportgeneration\' | translate}}\n            </a>\n        </li>\n\n        <li ng-show="singleSelection() && singleSelection().isFolder()">\n            <a href="" tabindex="-1" ng-click="smartClick(singleSelection())">\n                <i class="glyphicon glyphicon-folder-open"></i> {{\'open\' | translate}}\n            </a>\n        </li>\n\n        <li ng-show="config.pickCallback && singleSelection() && singleSelection().isSelectable()">\n            <a href="" tabindex="-1" ng-click="config.pickCallback(singleSelection().model)">\n                <i class="glyphicon glyphicon-hand-up"></i> {{\'select_this\' | translate}}\n            </a>\n        </li>\n\n        <li ng-show="config.allowedActions.download && !selectionHas(\'dir\') && singleSelection()">\n            <a href="" tabindex="-1" ng-click="download()">\n                <i class="glyphicon glyphicon-cloud-download"></i> {{\'download\' | translate}}\n            </a>\n        </li>\n\n        <li ng-show="config.allowedActions.downloadMultiple && !selectionHas(\'dir\') && !singleSelection()">\n            <a href="" tabindex="-1" ng-click="download()">\n                <i class="glyphicon glyphicon-cloud-download"></i> {{\'download_as_zip\' | translate}}\n            </a>\n        </li>\n\n        <li ng-show="config.allowedActions.preview && singleSelection().isImage() && singleSelection()">\n            <a href="" tabindex="-1" ng-click="openImagePreview()">\n                <i class="glyphicon glyphicon-picture"></i> {{\'view_item\' | translate}}\n            </a>\n        </li>\n\n<li ng-show="config.allowedActions.rename && singleSelection() && allowActionsWithSingleSelection()">\n            <a href="" tabindex="-1" ng-click="modal(\'rename\')">\n                <i class="glyphicon glyphicon-edit"></i> {{\'rename\' | translate}}\n            </a>\n        </li>\n\n        <li ng-show="config.allowedActions.move && (allowActionsWithSingleSelection() || allowActionsWithMultiSelection())">\n            <a href="" tabindex="-1" ng-click="modalWithPathSelector(\'move\')">\n                <i class="glyphicon glyphicon-arrow-right"></i> {{\'move\' | translate}}\n            </a>\n        </li>\n\n        <li ng-show="config.allowedActions.copy && !selectionHas(\'dir\')">\n            <a href="" tabindex="-1" ng-click="modalWithPathSelector(\'copy\')">\n                <i class="glyphicon glyphicon-log-out"></i> {{\'copy\' | translate}}\n            </a>\n        </li>\n\n        <li ng-show="config.allowedActions.edit && singleSelection() && singleSelection().isEditable()">\n            <a href="" tabindex="-1" ng-click="openEditItem()">\n                <i class="glyphicon glyphicon-pencil"></i> {{\'edit\' | translate}}\n            </a>\n        </li>\n\n        <li ng-show="config.allowedActions.changePermissions">\n            <a href="" tabindex="-1" ng-click="modal(\'changepermissions\')">\n                <i class="glyphicon glyphicon-lock"></i> {{\'permissions\' | translate}}\n            </a>\n        </li>\n\n        <li ng-show="config.allowedActions.compress && (!singleSelection() || selectionHas(\'dir\'))">\n            <a href="" tabindex="-1" ng-click="modal(\'compress\')">\n                <i class="glyphicon glyphicon-compressed"></i> {{\'compress\' | translate}}\n            </a>\n        </li>\n\n        <li ng-show="config.allowedActions.extract && singleSelection() && singleSelection().isExtractable()">\n            <a href="" tabindex="-1" ng-click="modal(\'extract\')">\n                <i class="glyphicon glyphicon-export"></i> {{\'extract\' | translate}}\n            </a>\n        </li>\n\n<li class="divider" ng-show="config.allowedActions.remove && (allowActionsWithSingleSelection() || allowActionsWithMultiSelection())"></li>\n\n<li ng-show="config.allowedActions.remove && (allowActionsWithSingleSelection() || allowActionsWithMultiSelection())">\n            <a href="" tabindex="-1" ng-click="modal(\'remove\')">\n                <i class="glyphicon glyphicon-trash"></i> {{\'remove\' | translate}}\n            </a>\n        </li>\n\n    </ul>\n\n    <ul class="dropdown-menu dropdown-right-click" role="menu" aria-labelledby="dropdownMenu" ng-show="!temps.length">\n        <li ng-show="config.allowedActions.createFolder">\n            <a href="" tabindex="-1" ng-click="prepareNewFolder() && modal(\'newfolder\')">\n                <i class="glyphicon glyphicon-plus"></i> {{\'new_folder\' | translate}}\n            </a>\n        </li>\n        <li ng-show="config.allowedActions.upload">\n            <a href="" tabindex="-1" ng-click="modal(\'uploadfile\')">\n                <i class="glyphicon glyphicon-cloud-upload"></i> {{\'upload_files\' | translate}}\n            </a>\n        </li>\n    </ul>\n</div>\n'),e.put("src/templates/main-icons.html",'<div class="iconset noselect">\n    <div class="item-list clearfix" ng-click="selectOrUnselect(null, $event)" ng-right-click="selectOrUnselect(null, $event)" prevent="true">\n        <div class="col-120" ng-repeat="item in $parent.fileList = (fileNavigator.fileList | filter: {model:{name: query}}) track by $index" ng-show="!fileNavigator.requesting && !fileNavigator.error">\n            <a href="" class="thumbnail text-center" ng-click="selectOrUnselect(item, $event)" ng-dblclick="smartClick(item)" ng-right-click="selectOrUnselect(item, $event)" title="{{item.model.name}} ({{item.model.size | humanReadableFileSize}})" ng-class="{selected: isSelected(item)}">\n                <div class="item-icon">\n                    <i class="glyphicon glyphicon-folder-open" ng-show="item.model.type === \'dir\'"></i>\n                    <i class="glyphicon glyphicon-file" data-ext="{{ item.model.name | fileExtension }}" ng-show="item.model.type === \'file\'" ng-class="{\'item-extension\': config.showExtensionIcons}"></i>\n                </div>\n                {{item.model.name | translate | strLimit : 11 }}\n            </a>\n        </div>\n    </div>\n\n    <div ng-show="fileNavigator.requesting">\n        <div ng-include="config.tplPath + \'/spinner.html\'"></div>\n    </div>\n\n    <div class="alert alert-warning" ng-show="!fileNavigator.requesting && fileNavigator.fileList.length < 1 && !fileNavigator.error">\n        {{"no_files_in_folder" | translate}}\n    </div>\n\n    <div class="alert alert-danger" ng-show="!fileNavigator.requesting && fileNavigator.error">\n        {{ fileNavigator.error }}\n    </div>\n</div>\n'),e.put("src/templates/main-table-modal.html",'<table class="table table-condensed table-modal-condensed mb0">\n    <thead>\n        <tr>\n            <th>\n                <a href="" ng-click="order(\'model.name\')">\n                    {{"name" | translate}}\n                    <span class="sortorder" ng-show="predicate[1] === \'model.name\'" ng-class="{reverse:reverse}"></span>\n                </a>\n            </th>\n            <th class="text-right"></th>\n        </tr>\n    </thead>\n    <tbody class="file-item">\n        <tr ng-show="fileNavigator.requesting">\n            <td colspan="2">\n                <div ng-include="config.tplPath + \'/spinner.html\'"></div>\n            </td>\n        </tr>\n        <tr ng-show="!fileNavigator.requesting && !fileNavigator.listHasFolders() && !fileNavigator.error">\n            <td>\n                {{"no_folders_in_folder" | translate}}...\n            </td>\n            <td class="text-right">\n                <button class="btn btn-sm btn-default" ng-click="fileNavigator.upDir()">{{"go_back" | translate}}</button>\n            </td>\n        </tr>\n        <tr ng-show="!fileNavigator.requesting && fileNavigator.error">\n            <td colspan="2">\n                {{ fileNavigator.error }}\n            </td>\n        </tr>\n        <tr ng-repeat="item in fileNavigator.fileList | orderBy:predicate:reverse track by $index" ng-show="!fileNavigator.requesting && item.model.type === \'dir\'" ng-if="!selectedFilesAreChildOfPath(item)">\n            <td>\n                <a href="" ng-click="fileNavigator.folderClick(item)" title="{{item.model.name}} ({{item.model.size | humanReadableFileSize}})">\n                    <i class="glyphicon glyphicon-folder-close"></i>\n                    {{item.model.name | translate | strLimit : 32}}\n                </a>\n            </td>\n            <td class="text-right">\n                <button class="btn btn-sm btn-default" ng-click="select(item)">\n                    <i class="glyphicon glyphicon-hand-up"></i> {{"select_this" | translate}}\n                </button>\n            </td>\n        </tr>\n    </tbody>\n</table>\n'),e.put("src/templates/main-table.html",'<table class="table mb0 table-files noselect">\n    <thead>\n        <tr>\n            <th>\n                <a href="" ng-click="order(\'model.name\')">\n                    {{"name" | translate}}\n                    <span class="sortorder" ng-show="predicate[1] === \'model.name\'" ng-class="{reverse:reverse}"></span>\n                </a>\n            </th>\n            <th class="hidden-xs" ng-hide="config.hideSize">\n                <a href="" ng-click="order(\'model.size\')">\n                    {{"size" | translate}}\n                    <span class="sortorder" ng-show="predicate[1] === \'model.size\'" ng-class="{reverse:reverse}"></span>\n                </a>\n            </th>\n            <th class="hidden-sm hidden-xs" ng-hide="config.hideDate">\n                <a href="" ng-click="order(\'model.\' + dateType)">\n                    {{"date" | translate}}\n                    <span class="sortorder" ng-show="predicate[1] === \'model.\' + dateType" ng-class="{reverse:reverse}"></span>\n                </a>\n                <select class="date-table-header" ng-model="dateType" ng-init="dateType = \'creationDate\'" required>\n                    <option value="creationDate">{{\'creationDate\' | translate}}</option>\n                    <option value="modificationDate">{{\'modificationDate\' | translate}}</option>\n                </select>\n            </th>\n            <th class="hidden-sm hidden-xs" ng-hide="config.hidePermissions">\n                <a href="" ng-click="order(\'model.permissions\')">\n                    {{"permissions" | translate}}\n                    <span class="sortorder" ng-show="predicate[1] === \'model.permissions\'" ng-class="{reverse:reverse}"></span>\n                </a>\n            </th>\n            <th class="hidden-sm hidden-xs" ng-hide="config.hideProcessingStatus">\n\t            <a href="" ng-click="order(\'model.processingStatus\')">\n                    {{"processingStatus" | translate}}\n                    <span class="sortorder" ng-show="predicate[1] === \'model.processingStatus\'" ng-class="{reverse:reverse}"></span>\n                </a>\n            </th>\n            <th class="hidden-sm hidden-xs" ng-hide="config.hideOwner || shouldDescriptionBeOpen()">\n\t            <a href="" ng-click="order(\'model.owner\')">\n                    {{"owner" | translate}}\n                    <span class="sortorder" ng-show="predicate[1] === \'model.owner\'" ng-class="{reverse:reverse}"></span>\n                </a>\n            </th>\n        </tr>\n    </thead>\n    <tbody class="file-item">\n        <tr ng-show="fileNavigator.requesting">\n            <td colspan="5">\n                <div ng-include="config.tplPath + \'/spinner.html\'"></div>\n            </td>\n        </tr>\n        <tr ng-show="!fileNavigator.requesting &amp;&amp; fileNavigator.fileList.length < 1 &amp;&amp; !fileNavigator.error">\n            <td colspan="5">\n                {{"no_files_in_folder" | translate}}\n            </td>\n        </tr>\n        <tr ng-show="!fileNavigator.requesting &amp;&amp; fileNavigator.error">\n            <td colspan="5">\n                {{ fileNavigator.error }}\n            </td>\n        </tr>\n        <tr class="item-list" ng-repeat="item in $parent.fileList = (fileNavigator.fileList | filter: {model:{name: query}} | orderBy:predicate:reverse) track by $index" ng-show="!fileNavigator.requesting" ng-click="selectOrUnselect(item, $event)" ng-dblclick="smartClick(item)" ng-right-click="selectOrUnselect(item, $event)" ng-class="{selected: isSelected(item)}">\n            <td>\n                <a href="" title="{{item.model.name}} ({{item.model.size | humanReadableFileSize}})">\n                    <i class="glyphicon glyphicon-folder-close" ng-show="item.model.type === \'dir\'"></i>\n                    <i class="glyphicon glyphicon-file" ng-show="item.model.type === \'file\'"></i>\n                    {{ translateItem(item) | translate | strLimit : 64}}\n                </a>\n            </td>\n            <td class="hidden-xs">\n                <span ng-show="item.model.type !== \'dir\' || (config.showSizeForDirectories && !config.hideSize)">\n                    {{item.model.size | humanReadableFileSize}}\n                </span>\n            </td>\n            <td class="hidden-sm hidden-xs" ng-hide="config.hideDate">\n                {{item.model[dateType] | date:\'yyyy-MM-dd HH:mm:ss\'}}\n            </td>\n            <td class="hidden-sm hidden-xs" ng-hide="config.hidePermissions">\n                {{item.model.perms.toCode(item.model.type === \'dir\'?\'d\':\'-\')}}\n            </td>\n            <td class="hidden-sm hidden-xs" ng-hide="config.hideProcessingStatus">\n                {{item.model.processingStatus | translate}}\n            </td>\n            <td class="hidden-sm hidden-xs" ng-hide="config.hideOwner || shouldDescriptionBeOpen()">\n                {{item.model.owner}}\n            </td>\n        </tr>\n    </tbody>\n</table>\n'),e.put("src/templates/main.html",'<div ng-controller="FileManagerCtrl" ngf-drop="addForUpload($files)" ngf-drag-over-class="\'upload-dragover\'" ngf-multiple="true">\n    <div ng-include="config.tplPath + \'/navbar.html\'"></div>\n\n    <div class="container-fluid">\n        <div class="row">\n\n            <div class="hidden-xs col-sm-4 col-md-2 sidebar file-tree animated slow fadeIn" ng-include="config.tplPath + \'/sidebar.html\'"\n              ng-show="config.sidebar &amp;&amp; fileNavigator.history[0]">\n            </div>\n\n            <div class="main" ng-class="[{\'col-sm-8 col-md-8\' : (config.sidebar &amp;&amp; fileNavigator.history[0] &amp;&amp; shouldDescriptionBeOpen())},\n            {\'col-sm-8 col-md-10\' : (config.sidebar &amp;&amp; fileNavigator.history[0] &amp;&amp; !shouldDescriptionBeOpen())}]">\n                <div ng-include="config.tplPath + \'/\' + viewTemplate" class="main-navigation clearfix"></div>\n            </div>\n\n            <div class="description hidden-xs hidden-sm col-md-2" ng-if="shouldDescriptionBeOpen()">\n                <div ng-include="config.tplPath + \'/description.html\'" class="main-navigation clearfix"></div>\n            </div>\n        </div>\n    </div>\n\n    <div ng-include="config.tplPath + \'/modals.html\'"></div>\n    <div ng-include="config.tplPath + \'/item-context-menu.html\'"></div>\n</div>\n'),e.put("src/templates/modals.html",'<div class="modal animated fadeIn" id="imagepreview">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal">\n            <span aria-hidden="true">&times;</span>\n            <span class="sr-only">{{"close" | translate}}</span>\n        </button>\n        <h4 class="modal-title">{{"preview" | translate}}</h4>\n      </div>\n      <div class="modal-body">\n        <div class="text-center">\n          <img id="imagepreview-target" class="preview" alt="{{singleSelection().model.name}}" ng-class="{\'loading\': apiMiddleware.apiHandler.inprocess}">\n          <span class="label label-warning" ng-show="apiMiddleware.apiHandler.inprocess">{{\'loading\' | translate}} ...</span>\n        </div>\n        <div ng-include data-src="\'error-bar\'" class="clearfix"></div>\n      </div>\n      <div class="modal-footer text-center">\n        <button type="button" class="btn btn-default btn-xs" data-dismiss="modal" ng-disabled="apiMiddleware.apiHandler.inprocess">{{"close" | translate}}</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="modal animated fadeIn" id="startreportgeneration">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal">\n          <span aria-hidden="true">&times;</span>\n          <span class="sr-only">{{"close" | translate}}</span>\n        </button>\n        <h4 class="modal-title">{{"REPORT_GENERATION_MODAL.TITLE" | translate}}</h4>\n      </div>\n      <form name="reportForm" id="reportForm" ng-submit="startReportGeneration(report)" novalidate>\n        <div class="modal-body">\n\n          {{\'REPORT_GENERATION_MODAL.REPORT_NAME\' | translate}}\n          <input class="col-md-12" name="reportTitle" type="text" ng-model="report.reportName" required/>\n          <label name="target" class="col-md-12" >{{\'REPORT_GENERATION_MODAL.REPORT_TARGET\' | translate}}</label>\n\n          <label class="col-xs-12">\n            <input type="checkbox" ng-model="report.reportSettings.myFiles"/>\n            {{\'REPORT_GENERATION_MODAL.MY_FILES\' | translate}}\n          </label>\n          <label class="col-xs-12">\n            <input type="checkbox" ng-model="report.reportSettings.institutionFiles"/>\n            {{\'REPORT_GENERATION_MODAL.INSTITUTION_FILES\' | translate}}\n          </label>\n          <label class="col-xs-12">\n            <input type="checkbox" ng-model="report.reportSettings.webResources"/>\n            {{\'REPORT_GENERATION_MODAL.WEB_RESOURCES\' | translate}}\n          </label>\n\n          <div ng-include data-src="\'error-bar\'" class="clearfix"></div>\n        </div>\n        <div class="modal-footer text-center">\n          <button class="btn btn-default btn-xs" type="button" data-dismiss="modal">{{"close" | translate}}</button>\n          <button class="btn btn-primary btn-xs" type="submit">{{"REPORT_GENERATION_MODAL.START_GENERATION" | translate}}</button>\n        </div>\n      </form>\n    </div>\n  </div>\n</div>\n\n<div class="modal animated fadeIn" id="startbatchreportgeneration">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal">\n          <span aria-hidden="true">&times;</span>\n          <span class="sr-only">{{"close" | translate}}</span>\n        </button>\n        <h4 class="modal-title">{{"REPORT_GENERATION_MODAL.BATCH_TITLE" | translate}}</h4>\n      </div>\n      <form name="reportForm" id="reportForm" ng-submit="startBatchReportGeneration(report)" novalidate>\n        <div class="modal-body">\n\n          <span ng-include data-src="\'selected-files-msg\'"></span>\n\n          <label name="target" class="col-md-12" >{{\'REPORT_GENERATION_MODAL.REPORT_TARGET\' | translate}}</label>\n\n          <label class="col-xs-12">\n            <input type="checkbox" ng-model="report.reportSettings.myFiles"/>\n            {{\'REPORT_GENERATION_MODAL.MY_FILES\' | translate}}\n          </label>\n          <label class="col-xs-12">\n            <input type="checkbox" ng-model="report.reportSettings.institutionFiles"/>\n            {{\'REPORT_GENERATION_MODAL.INSTITUTION_FILES\' | translate}}\n          </label>\n          <label class="col-xs-12">\n            <input type="checkbox" ng-model="report.reportSettings.webResources"/>\n            {{\'REPORT_GENERATION_MODAL.WEB_RESOURCES\' | translate}}\n          </label>\n\n          <div ng-include data-src="\'error-bar\'" class="clearfix"></div>\n        </div>\n        <div class="modal-footer text-center">\n          <button class="btn btn-default btn-xs" type="button" data-dismiss="modal">{{"close" | translate}}</button>\n          <button class="btn btn-primary btn-xs" type="submit">{{"REPORT_GENERATION_MODAL.START_GENERATION" | translate}}</button>\n        </div>\n      </form>\n    </div>\n  </div>\n</div>\n\n<div class="modal animated fadeIn" id="remove">\n  <div class="modal-dialog">\n    <div class="modal-content">\n    <form ng-submit="remove()">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal">\n            <span aria-hidden="true">&times;</span>\n            <span class="sr-only">{{"close" | translate}}</span>\n        </button>\n        <h4 class="modal-title">{{"confirm" | translate}}</h4>\n      </div>\n      <div class="modal-body">\n        {{\'sure_to_delete\' | translate}}\n        {{\'affected_files_and_reports\' | translate:removePreviewResult }}\n        <br/><span ng-include data-src="\'selected-files-msg\'"></span>\n\n        <div ng-include data-src="\'error-bar\'" class="clearfix"></div>\n      </div>\n      <div class="modal-footer text-center">\n        <button type="button" class="btn btn-default btn-xs" data-dismiss="modal" ng-disabled="apiMiddleware.apiHandler.inprocess">{{"cancel" | translate}}</button>\n        <button type="submit" class="btn btn-primary btn-xs" ng-disabled="apiMiddleware.apiHandler.inprocess" autofocus="autofocus">{{"remove" | translate}}</button>\n      </div>\n      </form>\n    </div>\n  </div>\n</div>\n\n<div class="modal animated fadeIn" id="move">\n  <div class="modal-dialog">\n    <div class="modal-content">\n        <form ng-submit="move()">\n            <div class="modal-header">\n              <button type="button" class="close" data-dismiss="modal">\n                  <span aria-hidden="true">&times;</span>\n                  <span class="sr-only">{{"close" | translate}}</span>\n              </button>\n              <h4 class="modal-title">{{\'move\' | translate}}</h4>\n            </div>\n            <div class="modal-body">\n              <div ng-include data-src="\'path-selector\'" class="clearfix"></div>\n              <div ng-include data-src="\'error-bar\'" class="clearfix"></div>\n            </div>\n            <div class="modal-footer text-center">\n              <button type="button" class="btn btn-default btn-xs" data-dismiss="modal" ng-disabled="apiMiddleware.apiHandler.inprocess">{{"cancel" | translate}}</button>\n              <button type="submit" class="btn btn-primary btn-xs" ng-disabled="apiMiddleware.apiHandler.inprocess">{{\'move\' | translate}}</button>\n            </div>\n        </form>\n    </div>\n  </div>\n</div>\n\n\n<div class="modal animated fadeIn" id="rename">\n  <div class="modal-dialog">\n    <div class="modal-content">\n        <form ng-submit="rename()">\n            <div class="modal-header">\n              <button type="button" class="close" data-dismiss="modal">\n                  <span aria-hidden="true">&times;</span>\n                  <span class="sr-only">{{"close" | translate}}</span>\n              </button>\n              <h4 class="modal-title">{{\'rename\' | translate}}</h4>\n            </div>\n            <div class="modal-body">\n              <label class="radio">{{\'enter_new_name_for\' | translate}} <b>{{singleSelection() && singleSelection().model.name}}</b></label>\n              <input class="form-control" ng-model="singleSelection().tempModel.name" autofocus="autofocus">\n\n              <div ng-include data-src="\'error-bar\'" class="clearfix"></div>\n            </div>\n            <div class="modal-footer text-center">\n              <button type="button" class="btn btn-default btn-xs" data-dismiss="modal" ng-disabled="apiMiddleware.apiHandler.inprocess">{{"cancel" | translate}}</button>\n              <button type="submit" class="btn btn-primary btn-xs" ng-disabled="apiMiddleware.apiHandler.inprocess">{{\'rename\' | translate}}</button>\n            </div>\n        </form>\n    </div>\n  </div>\n</div>\n\n<div class="modal animated fadeIn" id="copy">\n  <div class="modal-dialog">\n    <div class="modal-content">\n        <form ng-submit="copy()">\n            <div class="modal-header">\n              <button type="button" class="close" data-dismiss="modal">\n                  <span aria-hidden="true">&times;</span>\n                  <span class="sr-only">{{"close" | translate}}</span>\n              </button>\n              <h4 class="modal-title">{{\'copy_file\' | translate}}</h4>\n            </div>\n            <div class="modal-body">\n              <div ng-show="singleSelection()">\n                <label class="radio">{{\'enter_new_name_for\' | translate}} <b>{{singleSelection().model.name}}</b></label>\n                <input class="form-control" ng-model="singleSelection().tempModel.name" autofocus="autofocus">\n              </div>\n\n              <div ng-include data-src="\'path-selector\'" class="clearfix"></div>\n              <div ng-include data-src="\'error-bar\'" class="clearfix"></div>\n            </div>\n            <div class="modal-footer text-center">\n              <button type="button" class="btn btn-default btn-xs" data-dismiss="modal" ng-disabled="apiMiddleware.apiHandler.inprocess">{{"cancel" | translate}}</button>\n              <button type="submit" class="btn btn-primary btn-xs" ng-disabled="apiMiddleware.apiHandler.inprocess">{{"copy" | translate}}</button>\n            </div>\n        </form>\n    </div>\n  </div>\n</div>\n\n<div class="modal animated fadeIn" id="compress">\n  <div class="modal-dialog">\n    <div class="modal-content">\n        <form ng-submit="compress()">\n            <div class="modal-header">\n              <button type="button" class="close" data-dismiss="modal">\n                  <span aria-hidden="true">&times;</span>\n                  <span class="sr-only">{{"close" | translate}}</span>\n              </button>\n              <h4 class="modal-title">{{\'compress\' | translate}}</h4>\n            </div>\n            <div class="modal-body">\n              <div ng-show="apiMiddleware.apiHandler.asyncSuccess">\n                  <div class="label label-success error-msg">{{\'compression_started\' | translate}}</div>\n              </div>\n              <div ng-hide="apiMiddleware.apiHandler.asyncSuccess">\n                  <div ng-hide="config.allowedActions.compressChooseName">\n                    {{\'sure_to_start_compression_with\' | translate}} <b>{{singleSelection().model.name | translate}}</b> ?\n                  </div>\n                  <div ng-show="config.allowedActions.compressChooseName">\n                    <label class="radio">\n                      {{\'enter_file_name_for_compression\' | translate}}\n                      <span ng-include data-src="\'selected-files-msg\'"></span>\n                    </label>\n                    <input class="form-control" ng-model="temp.tempModel.name" autofocus="autofocus">\n                  </div>\n              </div>\n\n              <div ng-include data-src="\'error-bar\'" class="clearfix"></div>\n            </div>\n            <div class="modal-footer text-center">\n              <div ng-show="apiMiddleware.apiHandler.asyncSuccess">\n                  <button type="button" class="btn btn-default btn-xs" data-dismiss="modal" ng-disabled="apiMiddleware.apiHandler.inprocess">{{"close" | translate}}</button>\n              </div>\n              <div ng-hide="apiMiddleware.apiHandler.asyncSuccess">\n                  <button type="button" class="btn btn-default btn-xs" data-dismiss="modal" ng-disabled="apiMiddleware.apiHandler.inprocess">{{"cancel" | translate}}</button>\n                  <button type="submit" class="btn btn-primary btn-xs" ng-disabled="apiMiddleware.apiHandler.inprocess">{{\'compress\' | translate}}</button>\n              </div>\n            </div>\n        </form>\n    </div>\n  </div>\n</div>\n\n<div class="modal animated fadeIn" id="extract" ng-init="singleSelection().emptyName()">\n  <div class="modal-dialog">\n    <div class="modal-content">\n        <form ng-submit="extract()">\n            <div class="modal-header">\n              <button type="button" class="close" data-dismiss="modal">\n                  <span aria-hidden="true">&times;</span>\n                  <span class="sr-only">{{"close" | translate}}</span>\n              </button>\n              <h4 class="modal-title">{{\'extract_item\' | translate}}</h4>\n            </div>\n            <div class="modal-body">\n              <div ng-show="apiMiddleware.apiHandler.asyncSuccess">\n                  <div class="label label-success error-msg">{{\'extraction_started\' | translate}}</div>\n              </div>\n              <div ng-hide="apiMiddleware.apiHandler.asyncSuccess">\n                  <label class="radio">{{\'enter_folder_name_for_extraction\' | translate}} <b>{{singleSelection().model.name | translate}}</b></label>\n                  <input class="form-control" ng-model="singleSelection().tempModel.name" autofocus="autofocus">\n              </div>\n              <div ng-include data-src="\'error-bar\'" class="clearfix"></div>\n            </div>\n            <div class="modal-footer text-center">\n              <div ng-show="apiMiddleware.apiHandler.asyncSuccess">\n                  <button type="button" class="btn btn-default btn-xs" data-dismiss="modal" ng-disabled="apiMiddleware.apiHandler.inprocess">{{"close" | translate}}</button>\n              </div>\n              <div ng-hide="apiMiddleware.apiHandler.asyncSuccess">\n                  <button type="button" class="btn btn-default btn-xs" data-dismiss="modal" ng-disabled="apiMiddleware.apiHandler.inprocess">{{"cancel" | translate}}</button>\n                  <button type="submit" class="btn btn-primary btn-xs" ng-disabled="apiMiddleware.apiHandler.inprocess">{{\'extract\' | translate}}</button>\n              </div>\n            </div>\n        </form>\n    </div>\n  </div>\n</div>\n\n<div class="modal animated fadeIn" id="edit" ng-class="{\'modal-fullscreen\': fullscreen}">\n  <div class="modal-dialog modal-lg">\n    <div class="modal-content">\n        <form ng-submit="edit()">\n            <div class="modal-header">\n              <button type="button" class="close" data-dismiss="modal">\n                  <span aria-hidden="true">&times;</span>\n                  <span class="sr-only">{{"close" | translate}}</span>\n              </button>\n              <button type="button" class="close fullscreen" ng-click="fullscreen=!fullscreen">\n                  <i class="glyphicon glyphicon-fullscreen"></i>\n                  <span class="sr-only">{{\'toggle_fullscreen\' | translate}}</span>\n              </button>\n              <h4 class="modal-title">{{\'edit_file\' | translate}}</h4>\n            </div>\n            <div class="modal-body">\n                <label class="radio bold">{{ singleSelection().model.fullPath() }}</label>\n                <span class="label label-warning" ng-show="apiMiddleware.apiHandler.inprocess">{{\'loading\' | translate}} ...</span>\n                <textarea class="form-control code" ng-model="singleSelection().tempModel.content" ng-show="!apiMiddleware.apiHandler.inprocess" autofocus="autofocus"></textarea>\n                <div ng-include data-src="\'error-bar\'" class="clearfix"></div>\n            </div>\n            <div class="modal-footer text-center">\n              <button type="button" class="btn btn-default btn-xs" data-dismiss="modal" ng-disabled="apiMiddleware.apiHandler.inprocess">{{\'close\' | translate}}</button>\n              <button type="submit" class="btn btn-primary btn-xs" ng-show="config.allowedActions.edit" ng-disabled="apiMiddleware.apiHandler.inprocess">{{\'edit\' | translate}}</button>\n            </div>\n        </form>\n    </div>\n  </div>\n</div>\n\n<div class="modal animated fadeIn" id="newfolder">\n  <div class="modal-dialog">\n    <div class="modal-content">\n        <form ng-submit="createFolder()">\n            <div class="modal-header">\n              <button type="button" class="close" data-dismiss="modal">\n                  <span aria-hidden="true">&times;</span>\n                  <span class="sr-only">{{"close" | translate}}</span>\n              </button>\n              <h4 class="modal-title">{{\'new_folder\' | translate}}</h4>\n            </div>\n            <div class="modal-body">\n              <label class="radio">{{\'folder_name\' | translate}}</label>\n              <input class="form-control" ng-model="temps[0].tempModel.name" autofocus="autofocus">\n              <div ng-include data-src="\'error-bar\'" class="clearfix"></div>\n            </div>\n            <div class="modal-footer text-center">\n              <button type="button" class="btn btn-default btn-xs" data-dismiss="modal" ng-disabled="apiMiddleware.apiHandler.inprocess">{{"cancel" | translate}}</button>\n              <button type="submit" class="btn btn-primary btn-xs" ng-disabled="apiMiddleware.apiHandler.inprocess">{{\'create\' | translate}}</button>\n            </div>\n        </form>\n    </div>\n  </div>\n</div>\n\n<div class="modal animated fadeIn" id="uploadfile">\n  <div class="modal-dialog">\n    <div class="modal-content">\n        <form ng-submit="uploadFiles()">\n            <div class="modal-header">\n              <button type="button" class="close" data-dismiss="modal">\n                  <span aria-hidden="true">&times;</span>\n                  <span class="sr-only">{{"close" | translate}}</span>\n              </button>\n              <h4 class="modal-title">{{"upload_files" | translate}}</h4>\n            </div>\n            <div class="modal-body">\n              <label class="radio">\n                {{"files_will_uploaded_to" | translate}}\n                <b><span ng-repeat="var in fileNavigator.currentPath track by $index">/{{var | translate}}</span></b>\n              </label>\n              <button class="btn btn-default btn-block btn-xs" ngf-select="$parent.addForUpload($files)" ngf-multiple="true">\n                {{"select_files" | translate}}\n              </button>\n\n              <div class="upload-list">\n                <ul class="list-group">\n                  <li class="list-group-item" ng-repeat="(index, uploadFile) in $parent.uploadFileList track by index">\n                    <button class="btn btn-sm btn-danger pull-right" ng-click="$parent.removeFromUpload(index)">\n                        &times;\n                    </button>\n                    <h5 class="list-group-item-heading">{{uploadFile.name}}</h5>\n                    <p class="list-group-item-text">{{uploadFile.size | humanReadableFileSize}}</p>\n                  </li>\n                </ul>\n                <div ng-show="apiMiddleware.apiHandler.inprocess">\n                  <em>{{"uploading" | translate}}... {{apiMiddleware.apiHandler.progress}}%</em>\n                  <div class="progress mb0">\n                    <div class="progress-bar active" role="progressbar" aria-valuenow="{{apiMiddleware.apiHandler.progress}}" aria-valuemin="0" aria-valuemax="100" style="width: {{apiMiddleware.apiHandler.progress}}%"></div>\n                  </div>\n                </div>\n              </div>\n              <div ng-include data-src="\'error-bar\'" class="clearfix"></div>\n            </div>\n            <div class="modal-footer text-center">\n              <div>\n                  <button type="button" class="btn btn-default btn-xs" data-dismiss="modal">{{"cancel" | translate}}</button>\n                  <button type="submit" class="btn btn-primary btn-xs" ng-disabled="!$parent.uploadFileList.length || apiMiddleware.apiHandler.inprocess">{{\'upload\' | translate}}</button>\n              </div>\n            </div>\n        </form>\n    </div>\n  </div>\n</div>\n\n<div class="modal animated fadeIn" id="changepermissions">\n  <div class="modal-dialog">\n    <div class="modal-content">\n        <form ng-submit="changePermissions()">\n            <div class="modal-header">\n              <button type="button" class="close" data-dismiss="modal">\n                  <span aria-hidden="true">&times;</span>\n                  <span class="sr-only">{{"close" | translate}}</span>\n              </button>\n              <h4 class="modal-title">{{\'change_permissions\' | translate}}</h4>\n            </div>\n            <div class="modal-body">\n              <table class="table mb0">\n                  <thead>\n                      <tr>\n                          <th>{{\'permissions\' | translate}}</th>\n                          <th class="col-xs-1 text-center">{{\'read\' | translate}}</th>\n                          <th class="col-xs-1 text-center">{{\'write\' | translate}}</th>\n                          <th class="col-xs-1 text-center">{{\'exec\' | translate}}</th>\n                      </tr>\n                  </thead>\n                  <tbody>\n                      <tr ng-repeat="(permTypeKey, permTypeValue) in temp.tempModel.perms track by permTypeKey">\n                          <td>{{permTypeKey | translate}}</td>\n                          <td ng-repeat="(permKey, permValue) in permTypeValue track by permKey" class="col-xs-1 text-center" ng-click="main()">\n                              <label class="col-xs-12">\n                                <input type="checkbox" ng-model="temp.tempModel.perms[permTypeKey][permKey]">\n                              </label>\n                          </td>\n                      </tr>\n                </tbody>\n              </table>\n              <div class="checkbox" ng-show="config.enablePermissionsRecursive && selectionHas(\'dir\')">\n                <label>\n                  <input type="checkbox" ng-model="temp.tempModel.recursive"> {{\'recursive\' | translate}}\n                </label>\n              </div>\n              <div class="clearfix mt10">\n                  <span class="label label-primary pull-left" ng-hide="temp.multiple">\n                    {{\'original\' | translate}}:\n                    {{temp.model.perms.toCode(selectionHas(\'dir\') ? \'d\':\'-\')}}\n                    ({{temp.model.perms.toOctal()}})\n                  </span>\n                  <span class="label label-primary pull-right">\n                    {{\'changes\' | translate}}:\n                    {{temp.tempModel.perms.toCode(selectionHas(\'dir\') ? \'d\':\'-\')}}\n                    ({{temp.tempModel.perms.toOctal()}})\n                  </span>\n              </div>\n              <div ng-include data-src="\'error-bar\'" class="clearfix"></div>\n            </div>\n            <div class="modal-footer text-center">\n              <button type="button" class="btn btn-default btn-xs" data-dismiss="modal">{{"cancel" | translate}}</button>\n              <button type="submit" class="btn btn-primary btn-xs" ng-disabled="">{{\'change\' | translate}}</button>\n            </div>\n        </form>\n    </div>\n  </div>\n</div>\n\n<div class="modal animated fadeIn" id="selector" ng-controller="ModalFileManagerCtrl">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal">\n            <span aria-hidden="true">&times;</span>\n            <span class="sr-only">{{"close" | translate}}</span>\n        </button>\n        <h4 class="modal-title">{{"select_destination_folder" | translate}}</h4>\n      </div>\n      <div class="modal-body">\n        <div>\n            <div ng-include="config.tplPath + \'/current-folder-breadcrumb.html\'"></div>\n            <div ng-include="config.tplPath + \'/main-table-modal.html\'"></div>\n            <hr />\n            <button class="btn btn-xs btn-default" ng-click="selectCurrent()">\n                <i class="glyphicon"></i> {{"select_this" | translate}}\n            </button>\n        </div>\n      </div>\n      <div class="modal-footer text-center">\n        <button type="button" class="btn btn-default btn-xs" data-dismiss="modal" ng-disabled="apiMiddleware.apiHandler.inprocess">{{"close" | translate}}</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<script type="text/ng-template" id="path-selector">\n  <div class="panel panel-primary mt10 mb0">\n    <div class="panel-body">\n        <div class="detail-sources">\n          <div class="like-code mr5"><b>{{"selection" | translate}}:</b>\n            <span ng-include="\'selected-files-msg\'"></span>\n          </div>\n        </div>\n        <div class="detail-sources">\n          <div class="like-code mr5">\n            <b>{{"destination" | translate}}:</b> {{ getSelectedPath() }}\n          </div>\n          <a href="" class="label label-primary" ng-click="openNavigator(fileNavigator.currentPath)">\n            {{\'change\' | translate}}\n          </a>\n        </div>\n    </div>\n  </div>\n</script>\n\n<script type="text/ng-template" id="error-bar">\n  <div class="label label-danger error-msg pull-left animated fadeIn" ng-show="apiMiddleware.apiHandler.error">\n    <i class="glyphicon glyphicon-remove-circle"></i>\n    <span>{{apiMiddleware.apiHandler.error}}</span>\n  </div>\n</script>\n\n<script type="text/ng-template" id="selected-files-msg">\n  <span ng-show="temps.length == 1">\n    {{singleSelection().model.name | translate}}\n  </span>\n  <span ng-show="temps.length > 1">\n    {{\'these_elements\' | translate:totalSelecteds()}}\n    <a href="" class="label label-primary" ng-click="showDetails = !showDetails">\n      {{showDetails ? \'-\' : \'+\'}} {{\'details\' | translate}}\n    </a>\n  </span>\n  <div ng-show="temps.length > 1 &amp;&amp; showDetails">\n    <ul class="selected-file-details">\n      <li ng-repeat="tempItem in temps track by $index">\n        <b>{{tempItem.model.name | translate}}</b>\n      </li>\n    </ul>\n  </div>\n</script>\n'),
e.put("src/templates/navbar.html",'<nav class="navbar navbar-inverse">\n    <div class="container-fluid">\n        <div class="row">\n          <div class="col-xs-6 col-sm-4 col-md-2">\n            <div class="navbar-collapse">\n                <div class="navbar-form text-center">\n                  <!-- Dropdown button -->\n                  <div class="btn-group">\n                    <button type="button" class="btn btn-primary btn-xs" ng-click="modal(\'uploadfile\')">{{\'upload_files\' | translate}}</button>\n                    <button type="button" class="btn btn-primary dropdown-toggle btn-xs" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                      <span class="caret"></span>\n                      <span class="sr-only">{{ \'DASHBOARD.TOGGLE_DROPDOWN\' | translate }}</span>\n                    </button>\n                    <ul class="dropdown-menu">\n                      <li><a href="" ng-click="prepareNewFolder() && modal(\'newfolder\')"><i class="glyphicon glyphicon-plus"></i> {{\'new_folder\' | translate}}</a></li>\n                      <li><a href="" ng-click="modal(\'uploadfile\')"><i class="glyphicon glyphicon-cloud-upload"></i> {{\'upload_files\' | translate}}</a></li>\n                    </ul>\n                  </div>\n                <!--<button class="btn btn-primary btn-xs" ng-click="modal(\'uploadfile\')">\n                  <i class="glyphicon glyphicon-cloud-upload"></i> {{"upload_files" | translate}}\n                </button>-->\n              </div>\n            </div>\n          </div>\n            <div class="col-sm-5 col-md-8 hidden-xs">\n                <div ng-show="!config.breadcrumb">\n                    <a class="navbar-brand hidden-xs ng-binding" href="">angular-filemanager</a>\n                </div>\n                <div ng-include="config.tplPath + \'/current-folder-breadcrumb.html\'" ng-show="config.breadcrumb">\n                </div>\n            </div>\n            <div class="col-xs-6 col-sm-3 col-md-2">\n                <div class="navbar-collapse">\n                    <div class="navbar-form navbar-right text-right">\n\n                        <div class="btn-group" uib-dropdown auto-close="outsideClick">\n                            <button class="btn btn-flat btn-sm dropdown-toggle" type="button" id="dropDownMenuLang" uib-dropdown-toggle\n                              aria-expanded="true">\n                                <i class="glyphicon glyphicon-search mr2"></i>\n                            </button>\n                            <div uib-dropdown-menu class="dropdown-menu animated fast fadeIn pull-right" role="menu" aria-labelledby="dropDownMenuLang">\n                                <input type="text" class="form-control" ng-show="config.searchForm" placeholder="{{\'search\' | translate}}..." ng-model="$parent.query">\n                            </div>\n                        </div>\n\n                        <button class="btn btn-flat btn-sm" ng-click="$parent.setTemplate(\'main-icons.html\')" ng-show="$parent.viewTemplate !==\'main-icons.html\'"\n                            title="{{\'icons\' | translate}}">\n                            <i class="glyphicon glyphicon-th-large"></i>\n                        </button>\n\n                        <button class="btn btn-flat btn-sm" ng-click="$parent.setTemplate(\'main-table.html\')" ng-show="$parent.viewTemplate !==\'main-table.html\'"\n                            title="{{\'list\' | translate}}">\n                            <i class="glyphicon glyphicon-th-list"></i>\n                        </button>\n\n                        <!-- language dropdown is unnecessary -->\n                        <!--<div class="btn-group" uib-dropdown>\n                            <button class="btn btn-flat btn-sm dropdown-toggle" type="button" id="dropDownMenuLang" uib-dropdown-toggle aria-expanded="true">\n                                <i class="glyphicon glyphicon-globe mr2"></i>\n                            </button>\n\n                            <ul uib-dropdown-menu class="dropdown-menu scrollable-menu animated fast fadeIn pull-right" role="menu" aria-labelledby="dropDownMenuLang">\n                                <li role="presentation"><a role="menuitem" tabindex="-1" href="" ng-click="changeLanguage(\'hu\')">{{"hungarian" | translate}}</a></li>\n                                <li role="presentation"><a role="menuitem" tabindex="-1" href="" ng-click="changeLanguage(\'en\')">{{"english" | translate}}</a></li>\n                                <li role="presentation"><a role="menuitem" tabindex="-1" href="" ng-click="changeLanguage(\'zh\')">{{"chinese" | translate}}</a></li>\n                                <li role="presentation"><a role="menuitem" tabindex="-1" href="" ng-click="changeLanguage(\'es\')">{{"spanish" | translate}}</a></li>\n                                <li role="presentation"><a role="menuitem" tabindex="-1" href="" ng-click="changeLanguage(\'pt\')">{{"portuguese" | translate}}</a></li>\n                                <li role="presentation"><a role="menuitem" tabindex="-1" href="" ng-click="changeLanguage(\'fr\')">{{"french" | translate}}</a></li>\n                                <li role="presentation"><a role="menuitem" tabindex="-1" href="" ng-click="changeLanguage(\'de\')">{{"german" | translate}}</a></li>\n                                <li role="presentation"><a role="menuitem" tabindex="-1" href="" ng-click="changeLanguage(\'he\')">{{"hebrew" | translate}}</a></li>\n                                <li role="presentation"><a role="menuitem" tabindex="-1" href="" ng-click="changeLanguage(\'sk\')">{{"slovak" | translate}}</a></li>\n                                <li role="presentation"><a role="menuitem" tabindex="-1" href="" ng-click="changeLanguage(\'ru\')">{{"russian" | translate}}</a></li>\n                                <li role="presentation"><a role="menuitem" tabindex="-1" href="" ng-click="changeLanguage(\'ua\')">{{"ukrainian" | translate}}</a></li>\n                                <li role="presentation"><a role="menuitem" tabindex="-1" href="" ng-click="changeLanguage(\'tr\')">{{"turkish" | translate}}</a></li>\n                                <li role="presentation"><a role="menuitem" tabindex="-1" href="" ng-click="changeLanguage(\'fa\')">{{"persian" | translate}}</a></li>\n                            </ul>\n                        </div>-->\n\n                        <div class="btn-group" uib-dropdown>\n                            <button class="btn btn-flat btn-sm dropdown-toggle" type="button" id="more" uib-dropdown-toggle aria-expanded="true">\n                                <i class="glyphicon glyphicon-option-vertical"></i>\n                            </button>\n\n                            <ul uib-dropdown-menu class="dropdown-menu scrollable-menu animated fast fadeIn pull-right" role="menu" aria-labelledby="more">\n                                <li role="presentation" ng-show="config.allowedActions.createFolder" ng-click="prepareNewFolder() && modal(\'newfolder\')">\n                                    <!--<a href="#" role="menuitem" tabindex="-1">-->\n                                    <a role="menuitem" href="" tabindex="-1">\n                                        <i class="glyphicon glyphicon-plus"></i> {{"new_folder" | translate}}\n                                    </a>\n                                </li>\n                                <li role="presentation" ng-show="config.allowedActions.upload" ng-click="modal(\'uploadfile\')">\n                                    <!--<a href="#" role="menuitem" tabindex="-1">-->\n                                    <a role="menuitem" href="" tabindex="-1">\n                                        <i class="glyphicon glyphicon-cloud-upload"></i> {{"upload_files" | translate}}\n                                    </a>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</nav>\n'),e.put("src/templates/sidebar.html",'<ul class="nav nav-sidebar file-tree-root">\n<li ng-repeat="item in fileNavigator.history | orderBy:[\'item.model.order\',\'name\'] track by $index" ng-include="\'folder-branch-item\'"\n    ng-class="{\'active\': item.name == fileNavigator.currentPath.join(\'/\')}">\n    </li>\n</ul>\n\n<script type="text/ng-template" id="folder-branch-item">\n    <a href="" ng-click="fileNavigator.folderClick(item.item)" class="animated fast fadeInDown" ng-if="item.name != \'\'">\n        <span class="point">\n            <i class="glyphicon glyphicon-chevron-down" ng-show="isInThisPath(item.name)"></i>\n            <i class="glyphicon glyphicon-chevron-right" ng-show="!isInThisPath(item.name)"></i>\n        </span>\n        <i class="glyphicon glyphicon-folder-open mr2" ng-show="isInThisPath(item.name) && item.name !== \'user\' && item.name !== \'organizations\'"></i>\n        <i class="glyphicon glyphicon-folder-close mr2" ng-show="!isInThisPath(item.name) && item.name !== \'user\' && item.name !== \'organizations\'"></i>\n        <i class="glyphicon glyphicon-user mr2" ng-show="item.name === \'user\'"></i>\n        <i class="fa fa-university" ng-show="item.name === \'organizations\'"></i>\n        <span ng-if="item.item.model.base == true">{{ translateItem(item.item) | strLimit : 60 }}</span>\n        <span ng-if="item.item.model.base != true">{{ (item.name.split(\'/\').pop() || \'/\') | strLimit : 60 }}</span>\n    </a>\n    <ul class="nav nav-sidebar">\n        <li ng-repeat="item in item.nodes | orderBy:[\'item.model.order\',\'name\'] track by $index" ng-include="\'folder-branch-item\'" ng-class="{\'active\': item.name == fileNavigator.currentPath.join(\'/\')}">\n        </li>\n    </ul>\n</script>\n'),e.put("src/templates/spinner.html",'<div class="spinner-wrapper col-xs-12">\n    <svg class="spinner-container" style="width:65px;height:65px" viewBox="0 0 44 44">\n        <circle class="path" cx="22" cy="22" r="20" fill="none" stroke-width="4"></circle>\n    </svg>\n</div>')}]);